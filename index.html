<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trinity Speaking Quiz â€“ YEAR 3</title>
<style>
:root {
  --bg:#fdfdfd;
  --text:#2c3e50;
  --muted:#7f8c8d;
  --primary:#3498db;
  --primary-dark:#2980b9;
  --ok:#2ecc71;
  --bad:#e74c3c;
  --radius:20px;
  --shadow:0 8px 24px rgba(0,0,0,.12);
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;font-family:'Segoe UI',Roboto,Inter,sans-serif;background:var(--bg);color:var(--text);line-height:1.5;}
.app{max-width:900px;margin:40px auto;padding:0 16px;}
.app__header{text-align:center;margin-bottom:20px;}
.logos{display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:10px;}
.logo{max-height:60px;width:auto;}
.app__title{margin:0 0 4px;font-size:clamp(24px,4vw,36px);}
.app__subtitle{margin:0 0 14px;color:var(--muted);}
.progress{height:14px;background:#e6e6e6;border-radius:999px;overflow:hidden;margin-bottom:20px;}
.progress__bar{height:100%;width:0%;background:linear-gradient(90deg,var(--primary),var(--primary-dark));transition:width .4s ease;}
.card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:24px;position:relative;}
.card__meta{display:flex;justify-content:space-between;margin-bottom:12px;color:var(--muted);font-weight:600;font-size:14px;}
.question-box{display:flex;align-items:center;gap:10px;margin-bottom:14px;}
.question{font-size:clamp(18px,2.8vw,26px);margin:0;}
.speak-btn{border:none;background:var(--primary);color:#fff;cursor:pointer;font-size:22px;padding:6px 10px;border-radius:50%;transition:all .3s;}
.speak-btn:hover{background:var(--primary-dark);transform:scale(1.1);}
.choices{list-style:none;padding:0;margin:0;display:grid;gap:12px;}
.btn{border:0;padding:14px 18px;border-radius:var(--radius);background:#ecf0f1;color:var(--text);font-weight:600;cursor:pointer;transition:transform .1s ease, background .2s;}
.btn:hover{background:#d6eaf8;transform:translateY(-2px);}
.btn:active{transform:translateY(0);}
.btn[disabled]{opacity:.7;cursor:not-allowed;}
.btn--ghost{background:transparent;border:2px solid #ccc;text-align:center;width:auto;padding:10px 14px;}
.btn--ok{background:var(--ok);color:#fff;box-shadow:0 4px 12px rgba(46,204,113,.4);animation:correct 0.5s ease;}
.btn--bad{background:var(--bad);color:#fff;box-shadow:0 4px 12px rgba(231,76,60,.4);animation:shake .5s;}
.feedback{min-height:30px;margin-top:12px;font-weight:700;font-size:16px;display:flex;align-items:center;gap:8px;}
.feedback.ok::before{content:'âœ”';color:var(--ok);font-size:18px;}
.feedback.bad::before{content:'âœ–';color:var(--bad);font-size:18px;}
.actions{margin-top:16px;display:flex;gap:10px;justify-content:flex-end;}
.app__footer{margin-top:18px;color:var(--muted);text-align:center;}
img.question-img{max-width:100%;border-radius:16px;margin-bottom:12px;box-shadow:0 6px 16px rgba(0,0,0,.08);}
input[type=text]{width:100%;padding:10px;margin-top:10px;border-radius:10px;border:1px solid #ccc;}
@keyframes shake{10%,90%{transform:translateX(-1px);}20%,80%{transform:translateX(2px);}30%,50%,70%{transform:translateX(-4px);}40%,60%{transform:translateX(4px);}}
@keyframes correct{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
@media(max-width:768px){.logos{flex-direction:column;gap:10px;}.logo{max-height:50px;}.app__title{font-size:24px;}.question{font-size:18px;}}
@media(max-width:480px){.btn{font-size:14px;padding:12px;}.btn--ghost{padding:8px 12px;font-size:14px;}.logo{max-height:40px;}.app{padding:0 10px;}}
</style>
</head>
<body>
<main class="app">
<header class="app__header">
  <div class="logos">
    <img src="media/logo.png" alt="School logo" class="logo">
    <img src="media/trinity.png" alt="Trinity logo" class="logo">
  </div>
  <h1 class="app__title">Trinity Speaking â€“ Grade 3</h1>
  <p class="app__subtitle">Practice choosing the correct response (Multiple Choice)</p>
  <div class="progress" aria-label="Progress">
    <div class="progress__bar" id="progressBar"></div>
  </div>
</header>

<section class="card" id="quizCard" aria-live="polite">
  <div class="card__meta">
    <span id="counter">Question 1</span>
    <span id="score">Score: 0</span>
  </div>

  <div class="question-box">
    <h2 class="question" id="questionText">â€”</h2>
    <button id="speakBtn" class="speak-btn" title="Read aloud">ðŸ”Š</button>
  </div>

  <ul class="choices" id="choicesList"></ul>

  <div class="feedback" id="feedback" aria-live="polite" role="status"></div>

  <div class="actions">
    <button id="skipBtn" class="btn btn--ghost">Skip</button>
    <button id="restartBtn" class="btn btn--ghost" hidden>Restart</button>
  </div>
</section>

<footer class="app__footer">
  <small>Tip: Only select the answers that correctly describe the question. ðŸ™‚</small>
</footer>
</main>

<script>
// ----------------------------
// QUESTIONS (ejemplo mÃ­nimo, reemplazar con tus 40 preguntas)
const questions = [
  {type:"text",question:"What's your name?",choices:["My name is Peter","I'm fine, thank you","I'm 8 years old"],correct:[0]},  
  {type:"text",question:"How are you?",choices:["My name is Anna","I like pizza","I'm fine, thank you"],correct:[2]},
  {type:"text",question:"How old are you?",choices:["I'm fine, thank you","I'm 8 years old","It's cloudy"],correct:[1]},
  {type:"text",question:"What's the weather like?",choices:["I'm fine","I like watching TV","It's sunny"],correct:[2]},
  {type:"text",question:"What's the date today?",choices:["It's cloudy","September ten","It's Monday, September 15th"],correct:[2]},
  {type:"text",question:"When's your birthday?",choices:["My birthday is on January 11th","Happy birthday!","It May 20"],correct:[0]},
  {type:"text",question:"Where do you live?",choices:["I live in Buenos Aires","I am 10 years old","I like cats"],correct:[0]},
  {type:"text",question:"What's your favourite colour?",choices:["My favourite colour is blue","Yes, please","I'm fine"],correct:[0]},
  {type:"text",question:"Do you have any pets?",choices:["Yes, I do","No, I can't","I am fine"],correct:[0]},
  {type:"text",question:"What's your favourite food?",choices:["Yes, I am","My favourite food is pizza","No, I don't"],correct:[1]},
  {type:"text",question:"Can you swim?",choices:["Yes, I can","I am swimming","I like swimming"],correct:[0]},
  {type:"text",question:"What is your favourite sport?",choices:["I like pizza","I am 9 years old", "My favourite sport is football"],correct:[2]},
  {type:"text",question:"Do you like ice cream?",choices:["Yes, I do","No, I can't","I'm hungry"],correct:[0]},
  {type:"text",question:"Can you ride a bike?",choices:["Yes, I can","I like pizza","I'm fine"],correct:[0]},
  {type:"text",question:"What is your favourite school subject?",choices:["My favourite subject is Language","I am 9 years old","I like cats"],correct:[0]},
  {type:"text",question:"What do you usually eat for breakfast?",choices:["I usually eat pizza","Pizza","I usually eat cookies"],correct:[2]},
  {type:"text",question:"Do you like reading books?",choices:["Yes, I do","I have a dog","I like swimming"],correct:[0]},
  {type:"text",question:"What's your father's job?",choices:["It's great!","It's five o'clock","He's a dentist"],correct:[2]},
  {type:"text",question:"Do you play any musical instrument?",choices:["Yes, I do","No, thank you","I am 8"],correct:[0]},
  {type:"text",question:"What do you usually do in the evening?",choices:["I get up in the morning","I have a shower and watch TV","I like cats"],correct:[1]},
  {type:"text",question:"Can you speak English?",choices:["No, I don't","I live in Paris","Yes, I can"],correct:[2]},
  {type:"text",question:"What time do you go to bed?",choices:["Yes, I do","I go to bed at 10 o'clock","I have dinner"],correct:[1]},
  
  // 10 preguntas con imagen y 5 correctas
  {type:"image",question:"Look at the picture. Choose 5 correct sentences.",image:"media/img1.png",
   choices:["There is a clock","The weather is partly cloudy","The children are playing","They are in the Art class","There is chairs","They are in a classroom","The birds are flying","They are pasting, cutting and colouring pictures","There are some apples", "The dad is cooking"],
   correct:[0,1,3,5,7]},
  {type:"image",question:"Look at the picture. Choose 5 correct sentences.",image:"media/img2.png",
   choices:["It's sunny","The girl is skipping the rope","The boy is playing with a car","They are playing football","The bird is flying","It's cloudy","The ball is red","The girl is reading","The trees are red","He is cooking"],
   correct:[0,1,2,3,4]},
  {type:"image",question:"Look at the picture. Choose 5 correct sentences.",image:"media/img3.png",
   choices:["The girl is on the tree","The dog is jumping","There are 4 apples","There is any apples","The dog is playing with the boy","She is singing","The boy is sleeping","She is sleeping","She is reading a book","It's rainy"],
   correct:[0,2,4,6,8]},

  
  {type:"text",question:"Can your dad cook?",choices:["Yes, I do","Yes, he can","No, I don't"],correct:[1]},
  {type:"text",question:"What do you do in the morning?",choices:["I get up and I brush my teeth","I go to bed","I go home"],correct:[0]},
  {type:"text",question:"Do you like swimming?",choices:["Yes, I do","I can't","I like pizza"],correct:[0]},
  {type:"text",question:"What time do you usually get up?",choices:["7 o'clock","I like cats","I'm happy"],correct:[0]},
  {type:"text",question:"Imagine you are in a restaurant, what would you like to eat?",choices:["Yes, I would","I like sushi","I'd like to eat a burger"],correct:[2]},
  {type:"text",question:"Perfect, that's it. Have a nice day! Goodbye!",choices:["Good bye!","Hello!","I'm happy"],correct:[0]},


];

// ----------------------------
// VARIABLES
let currentIndex=0, score=0, currentQuestion=null;
const questionText=document.getElementById("questionText");
const choicesList=document.getElementById("choicesList");
const feedback=document.getElementById("feedback");
const counter=document.getElementById("counter");
const scoreDisplay=document.getElementById("score");
const progressBar=document.getElementById("progressBar");
const restartBtn=document.getElementById("restartBtn");
const skipBtn=document.getElementById("skipBtn");

// ----------------------------
// ----------------------------
// LOAD QUESTION
function loadQuestion(){
  if(currentIndex>=questions.length){showResults();return;}
  currentQuestion=questions[currentIndex];
  questionText.textContent=currentQuestion.question;
  counter.textContent=`Question ${currentIndex+1} of ${questions.length}`;
  scoreDisplay.textContent=`Score: ${score}`;
  progressBar.style.width=`${(currentIndex/questions.length)*100}%`;
  feedback.textContent=""; feedback.className="feedback"; // reset feedback
  choicesList.innerHTML="";

  const speakBtn = document.getElementById("speakBtn");

  if(currentQuestion.type==="image"){
    // ðŸ”´ Ocultar parlante en preguntas con imagen
    speakBtn.style.display = "none";

    const img=document.createElement("img"); 
    img.src=currentQuestion.image; 
    img.alt="Question Image"; 
    img.className="question-img";
    choicesList.appendChild(img);

    currentQuestion.choices.forEach((choice,i)=>{
      const li=document.createElement("li");
      const label=document.createElement("label");
      label.style.display="block";
      const checkbox=document.createElement("input"); 
      checkbox.type="checkbox"; 
      checkbox.value=i;
      label.appendChild(checkbox); 
      label.appendChild(document.createTextNode(" "+choice));
      li.appendChild(label); 
      choicesList.appendChild(li);
    });
    const btnCheck=document.createElement("button");
    btnCheck.className="btn btn--ghost"; 
    btnCheck.textContent="Check Answer"; 
    btnCheck.addEventListener("click",checkImageAnswer);
    choicesList.appendChild(btnCheck);
  } else {
    // ðŸ”µ Mostrar parlante en preguntas de texto
    speakBtn.style.display = "inline-block";

    currentQuestion.choices.forEach((choice,i)=>{
      const li=document.createElement("li");
      const btn=document.createElement("button");
      btn.className="btn"; 
      btn.textContent=choice;
      btn.addEventListener("click",()=>checkTextAnswer(i,btn));
      li.appendChild(btn); 
      choicesList.appendChild(li);
    });
  }
}


// ----------------------------
// CHECK ANSWERS
function checkTextAnswer(i,btn){
  const isCorrect=currentQuestion.correct.includes(i);
  if(isCorrect){btn.classList.add("btn--ok");feedback.textContent="Correct!";feedback.className="feedback ok";score++;}
  else{btn.classList.add("btn--bad");feedback.textContent="Wrong answer!";feedback.className="feedback bad";}
  [...choicesList.querySelectorAll("button")].forEach(b=>b.disabled=true);
  setTimeout(()=>{currentIndex++;loadQuestion();},1200);
}

function checkImageAnswer(){
  const checkboxes=choicesList.querySelectorAll("input[type=checkbox]");
  const selected=[]; checkboxes.forEach(cb=>{if(cb.checked)selected.push(parseInt(cb.value));});
  const correct=currentQuestion.correct;
  const allCorrect=selected.length===correct.length && selected.every(v=>correct.includes(v));
  if(allCorrect){feedback.textContent="Correct!";feedback.className="feedback ok";score++;}
  else{feedback.textContent="Wrong answer!";feedback.className="feedback bad";}
  checkboxes.forEach(cb=>cb.disabled=true);
  const btnCheck=choicesList.querySelector("button"); if(btnCheck)btnCheck.disabled=true;
  setTimeout(()=>{currentIndex++;loadQuestion();},1500);
}

// ----------------------------
// RESULTS, RESTART, SKIP
function showResults(){
  questionText.textContent="Quiz completed!";
  choicesList.innerHTML="";
  feedback.textContent="";
  progressBar.style.width="100%";
  skipBtn.hidden=true;

  // FORM USING FORMSPREE
  const form=document.createElement("form");
  form.method="POST";
  form.action="https://formspree.io/f/mandldqw"; // <- reemplazar por tu Formspree ID
  form.innerHTML=`
    <p>Your final score: ${score} / ${questions.length}</p>
    <label>Student Name:</label>
    <input type="text" name="student_name" required>
    <input type="hidden" name="score" value="${score}">
    <input type="hidden" name="total_questions" value="${questions.length}">
    <button class="btn" type="submit">Send Result</button>
  `;
  choicesList.appendChild(form);

  restartBtn.hidden=false;
}

restartBtn.addEventListener("click",()=>{currentIndex=0; score=0; restartBtn.hidden=true; skipBtn.hidden=false; loadQuestion();});
skipBtn.addEventListener("click",()=>{currentIndex++; loadQuestion();});

// ----------------------------
// BRITISH ENGLISH VOICE
let voices=[];function setVoices(){voices=speechSynthesis.getVoices();}
speechSynthesis.onvoiceschanged=setVoices;setVoices();
document.getElementById("speakBtn").addEventListener("click",()=>{
  if(!currentQuestion) return;
  const utter=new SpeechSynthesisUtterance(currentQuestion.question);
  utter.lang="en-GB"; utter.rate=1; utter.pitch=1;
  const britVoice=voices.find(v=>v.lang==="en-GB"); if(britVoice)utter.voice=britVoice;
  speechSynthesis.speak(utter);
});

// START QUIZ
loadQuestion();
</script>
</body>
</html>
